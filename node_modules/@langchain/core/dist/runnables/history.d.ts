import { BaseCallbackConfig } from "../callbacks/manager.js";
import { BaseChatMessageHistory } from "../chat_history.js";
import { BaseMessage } from "../messages/index.js";
import { Run } from "../tracers/base.js";
import { Runnable, RunnableBinding, type RunnableBindingArgs } from "./base.js";
import { RunnableConfig } from "./config.js";
type GetSessionHistoryCallable = (...args: Array<any>) => Promise<BaseChatMessageHistory>;
export declare class RunnableWithMessageHistory<RunInput, RunOutput> extends RunnableBinding<RunInput, RunOutput, BaseCallbackConfig> {
    runnable: Runnable<RunInput, RunOutput>;
    inputMessagesKey?: string;
    outputMessagesKey?: string;
    historyMessagesKey?: string;
    getMessageHistory: GetSessionHistoryCallable;
    constructor(fields: Omit<RunnableBindingArgs<RunInput, RunOutput, BaseCallbackConfig>, "bound"> & {
        runnable: Runnable<RunInput, RunOutput>;
        getMessageHistory: GetSessionHistoryCallable;
        inputMessagesKey?: string;
        outputMessagesKey?: string;
        historyMessagesKey?: string;
    });
    _getInputMessages(inputValue: string | BaseMessage | Array<BaseMessage>): Array<BaseMessage>;
    _getOutputMessages(outputValue: string | BaseMessage | Array<BaseMessage> | Record<string, any>): Array<BaseMessage>;
    _enterHistory(input: any, kwargs?: {
        config?: RunnableConfig;
    }): Array<BaseMessage>;
    _exitHistory(run: Run, config: BaseCallbackConfig): Promise<void>;
    _mergeConfig(...configs: Array<BaseCallbackConfig | undefined>): Promise<Partial<BaseCallbackConfig>>;
}
export {};
